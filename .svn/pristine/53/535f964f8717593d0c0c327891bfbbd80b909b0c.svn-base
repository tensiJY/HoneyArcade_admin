<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
	<th:block th:replace="fragments/meta :: metaFragment(title='수익 관리')"></th:block>
	<th:block th:replace="fragments/style :: styleFragment"></th:block>
	<link rel="stylesheet" type="text/css"
		th:href="@{/resources/cork/plugins/bootstrap-select/bootstrap-select.min.css}">
		<link rel="stylesheet" type="text/css" th:href="@{/resources/cork/plugins/table/datatable/datatables.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/resources/cork/assets/css/elements/custom-pagination.css}">
	<link rel="stylesheet" type="text/css" th:href="@{/resources/honeyArcade/admin/common/versatile/css/datepicker.css}">
</head>
<body class="sidebar-noneoverflow">
	<th:block th:replace="fragments/header :: headerFragment"></th:block>
	<div class="main-container" id="container">
		<div class="overlay"></div>
		<div class="search-overlay"></div>
		<th:block th:replace="fragments/sidebar :: sidebarFragment(main='im', sub='im-sales')"></th:block>
		<div id="content" class="main-content">
			<div class="layout-px-spacing">
				<div class="row layout-top-spacing">
					<div id="tableHover" class="col-lg-12 col-12 layout-spacing">
						<div class="statbox widget box box-shadow">
							<div class="widget-header">
								<div class="row">
									<div class="col-xl-12 col-md-12 col-sm-12 col-12">
										<h4>수익 관리</h4>
									</div>
								</div>
							</div>
							<div class="widget-content widget-content-area">
								<form class="searchForm" id="searchForm" method="GET" th:action="@{/admin/im/sales/list}">
									<div class="form-inline">
										<div class="form-group mr-2">
											<select id="dateType" name="dateType" class="selectpicker" data-width="fit">
												<option value="1" th:selected="${1 == dateType}">연별 통계</option>
												<option value="2" th:selected="${2 == dateType}">월별 통계</option>
											</select>
										</div>
										<div class="form-group mr-2 mb-2">
											<div class="c-datepicker-date-editor c-datepicker-single-editor yearPicker">
											  <i class="c-datepicker-range__icon kxiconfont icon-clock"></i>
												  <input type="text" autocomplete="off" id="yearPicker" name="" placeholder="Select" class="c-datepicker-data-input only-date" th:value="${year}">
											</div>
										</div>
										<div class="form-group mr-2 mb-2">
											<div class="c-datepicker-date-editor c-datepicker-single-editor monthPicker" style="display: none;">
											  <i class="c-datepicker-range__icon kxiconfont icon-clock"></i>
												  <input type="text" autocomplete="off" id="monthPicker" name="" placeholder="Select" class="c-datepicker-data-input only-date" th:value="${year + '-' + month}">
												  <input type="hidden" id="yearTarget"  name="year"  th:value="${year}" readonly>
												  <input type="hidden" id="monthTarget" name="month" th:value="${month}" readonly>
											</div>
										</div>
										<div class="form-group mb-2">
										<input type="button" id="searchBtn" class="btn btn-primary" value="조회">
									</div>
									</div>
								</form>
							</div>
							</div>
							<div class="statbox widget box box-shadow mt-2 ">
								<div class="widget-content widget-content-area br-6">
									<div class="form-inline col">
											<div class="form-group mb-4 mt-2">
												<label class="control-label mr-2 text-dark">총 결제 금액</label>
												<input type="input" class="form-control" readonly th:value="${#numbers.formatInteger(resultVO.totalPrice, 0, 'COMMA') + '원'}">
											</div>
										</div>
									<table id="zero-config" class="table table-hover text-center" style="width:100%">
										<thead>
											<tr>
												<th>번호
												</th>
												<th>결제일
												</th>
												<th>결제월
												</th>
												<th>결제금액
												</th>
												<th>지역
												</th>
												<th>건물
												</th>
												<th>상점명
												</th>
												<th>아이디
												</th>
											</tr>
										</thead>
										<tbody>
											<th:block th:if="${statList.size() == 0}">
												<tr>	
													<td colspan=8>조회된 데이터가 없습니다</td>
												</tr>
											</th:block>
											
											<th:block th:if="${statList.size() != 0}">
												<th:block th:each="list : ${statList}">
													<tr>
														<td>
															[[${list.row_num}]]
														</td>
														<td>
															[[${list.pay_day}]]
														</td>
														<td>
															[[${list.pay_ym}]]
														</td>
														<td>
															[[${list.sum_money}]]
														</td>
														<td>
															[[${list.sido_name + ' ' + list.sigungu_name + ' ' + list.dong_name}]]
														</td>
														<td>
															[[${list.build_name}]]
														</td>
														<td>
															[[${list.store_name}]]
														</td>
														<td>
															[[${list.member_id}]]
														</td>
													</tr>
												</th:block>	
											</th:block>
										</tbody>
									</table>
									<div class="paginating-container pagination-solid">
										<th:block th:if="${statList.size() == 0}">
											<ul class="pagination">
										        <li class="prev"><a href="javascript:void(0);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
														viewBox="0 0 24 24" fill="none" stroke="currentColor"
														stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
														class="feather feather-arrow-left">
														<line x1="19" y1="12" x2="5" y2="12"></line>
														<polyline points="12 19 5 12 12 5"></polyline>
													</svg></a></li>
										        <li class="active"><a href="javascript:void(0);">1</a></li>
										        <li class="next"><a href="javascript:void(0);"><svg
														xmlns="http://www.w3.org/2000/svg" width="24" height="24"
														viewBox="0 0 24 24" fill="none" stroke="currentColor"
														stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
														class="feather feather-arrow-right">
														<line x1="5" y1="12" x2="19" y2="12"></line>
														<polyline points="12 5 19 12 12 19"></polyline>
													</svg></a></li>
										    </ul>
										</th:block>
										<th:block th:if="${statList.size() != 0}">
										    <ul class="pagination">
										    	<th:block th:if="${pageUtil.startPage == 1}">
											        <li class="prev"><a href="javascript:void(0);"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
															viewBox="0 0 24 24" fill="none" stroke="currentColor"
															stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
															class="feather feather-arrow-left">
															<line x1="19" y1="12" x2="5" y2="12"></line>
															<polyline points="12 19 5 12 12 5"></polyline>
														</svg></a></li>
										    	</th:block>
										    	<th:block th:if="${pageUtil.startPage != 1}">
										    		<li class="prev">
										    			<a th:href="@{/admin/im/sales/list(nowPage=${pageUtil.startPage-1}, dateType=${dateType}, year=${year}, month=${month})}">
										    				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left">
															<line x1="19" y1="12" x2="5" y2="12"></line>
															<polyline points="12 19 5 12 12 5"></polyline>
															</svg>
														</a>
													</li>
										    	</th:block>
										        <li th:each="page : ${#numbers.sequence(pageUtil.startPage, pageUtil.endPage)}" th:classappend="${page == nowPage}? 'active'">
										        	<a th:text="${page}" th:href="@{/admin/im/sales/list(nowPage=${page},dateType=${dateType}, year=${year}, month=${month}  )}" >1</a>
										        </li>
										        <th:block th:if="${pageUtil.endPage == pageUtil.totalPage}">
											        <li class="next">
											        	<a href="javascript:void(0);">
											        		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right">
																<line x1="5" y1="12" x2="19" y2="12"></line>
																<polyline points="12 5 19 12 12 19"></polyline>
															</svg>
														</a>
													</li>
										        </th:block>
										        <th:block th:if="${pageUtil.endPage != pageUtil.totalPage}">
											        <li class="next">
											        	<a th:href="@{/admin/im/sales/list(nowPage=${pageUtil.endPage+1}, dateType=${dateType}, year=${year}, month=${month})}">
											        		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right">
																<line x1="5" y1="12" x2="19" y2="12"></line>
																<polyline points="12 5 19 12 12 19"></polyline>
															</svg>
														</a>
													</li>
										        </th:block>
										    </ul>
										</th:block>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<th:block th:replace="fragments/footer"></th:block>
			</div>
		</div>
		<th:block th:replace="fragments/script :: scriptFragment(useScriptCsrf='true')"></th:block>
		<script th:src="@{/resources/cork/plugins/bootstrap-select/bootstrap-select.min.js}"></script>
		<script th:src="@{/resources/honeyArcade/admin/common/moment/moment.js}"></script>
		<script th:src="@{/resources/honeyArcade/admin/common/versatile/js/datepicker.all.js}"></script>
		<script th:src="@{/resources/honeyArcade/admin/common/versatile/js/datepicker.ko.js}"></script>	
		<script th:src="@{/resources/honeyArcade/admin/im/sales/js/adminImSalesList.js}"></script>
</body>
</html>